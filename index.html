<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sweet To-Do ğŸ¬</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <style>
    /* Swipe animation helpers */
    .swipe-left {
      animation: swipeLeft 0.4s forwards;
    }
    .swipe-right {
      animation: swipeRight 0.4s forwards;
    }
    @keyframes swipeLeft {
      100% { transform: translateX(-100%) scale(0); opacity: 0; }
    }
    @keyframes swipeRight {
      100% { transform: translateX(100%) scale(0); opacity: 0; }
    }
  </style>
</head>
<body class="bg-pink-50 text-gray-800 flex flex-col items-center min-h-screen p-6">

  <h1 class="text-4xl font-bold text-pink-600 mb-2">Sweet To-Do ğŸ¬</h1>
  <p id="quoteOfDay" class="text-lg italic text-pink-500 mb-4 text-center max-w-md mx-auto"></p>
  <p class="text-xl font-medium text-pink-500 mb-6 text-center">The Time Management Table<br>Wanna Save Your Time? Letâ€™s Go! â³</p>

  <div class="w-full max-w-md">
    <div class="flex mb-4">
      <input id="taskInput" type="text" placeholder="Add a sweet task..."
             class="flex-1 p-3 rounded-l-lg border border-pink-300 focus:outline-none focus:ring-2 focus:ring-pink-400" />
      <button id="addBtn" class="bg-pink-400 text-white px-4 rounded-r-lg hover:bg-pink-500 transition">Add</button>
    </div>

    <ul id="taskList" class="space-y-2"></ul>
  </div>

  <!-- Sounds -->
  <audio id="soundAdd" src="https://www.soundjay.com/buttons/sounds/button-3.mp3" preload="auto"></audio>
  <audio id="soundDone" src="https://www.soundjay.com/buttons/sounds/button-4.mp3" preload="auto"></audio>
  <audio id="soundDelete" src="https://www.soundjay.com/buttons/sounds/button-10.mp3" preload="auto"></audio>
  <audio id="reminderSound" src="https://www.soundjay.com/buttons/sounds/button-3.mp3" preload="auto"></audio>

<script>
  // ----- Motivational Quotes -----
  const quotes = [
    "ğŸŒŸ Believe you can and you're halfway there.",
    "ğŸ“ Productivity is the key to sweet success!",
    "ğŸ« One task at a time, one day at a time.",
    "ğŸ­ Sweet progress is better than perfect procrastination.",
    "ğŸ¬ Don't wait. The perfect time is now.",
    "ğŸ¯ Focus on what matters most.",
    "ğŸŒˆ Every small step is progress.",
    "ğŸ”¥ Stay sweet, stay sharp."
  ];
  function setQuoteOfDay() {
    const quoteEl = document.getElementById('quoteOfDay');
    // Pick a quote based on date to stay same during the day
    const daySeed = new Date().toDateString().length; // simple seed
    const index = new Date().getDate() % quotes.length;
    quoteEl.textContent = quotes[index];
  }

  // ----- Core task app -----
  let tasks = JSON.parse(localStorage.getItem("sweetTasks")) || [];

  const taskInput = document.getElementById("taskInput");
  const taskList = document.getElementById("taskList");
  const addBtn = document.getElementById("addBtn");

  const soundAdd = document.getElementById("soundAdd");
  const soundDone = document.getElementById("soundDone");
  const soundDelete = document.getElementById("soundDelete");
  const reminderSound = document.getElementById("reminderSound");

  function saveTasks() {
    localStorage.setItem("sweetTasks", JSON.stringify(tasks));
  }

  function renderTasks() {
    taskList.innerHTML = '';
    tasks.forEach((task, i) => {
      const li = document.createElement("li");
      li.className = `flex items-center justify-between p-3 rounded-lg bg-white shadow transition-all duration-300 cursor-pointer ${
        task.done ? 'opacity-50 line-through' : ''
      }`;
      li.textContent = task.text;

      if (task.time) {
        const timeSpan = document.createElement('span');
        timeSpan.textContent = ` [${task.time}]`;
        timeSpan.className = 'text-xs text-gray-400 ml-2';
        li.appendChild(timeSpan);
      }

      // Swipe gesture support (mobile)
      let touchStartX = 0;
      let touchEndX = 0;

      li.addEventListener('touchstart', (e) => {
        touchStartX = e.changedTouches[0].screenX;
      });

      li.addEventListener('touchend', (e) => {
        touchEndX = e.changedTouches[0].screenX;
        handleSwipeGesture(i, li);
      });

      function handleSwipeGesture(index, element) {
        const deltaX = touchEndX - touchStartX;
        if (Math.abs(deltaX) > 50) { // swipe threshold
          if (deltaX > 0) {
            // swipe right -> toggle done
            element.classList.add('swipe-right');
            setTimeout(() => {
              toggleDone(index);
              element.classList.remove('swipe-right');
            }, 300);
            soundDone.play();
          } else {
            // swipe left -> delete task
            element.classList.add('swipe-left');
            setTimeout(() => {
              deleteTask(index);
              element.classList.remove('swipe-left');
            }, 300);
            soundDelete.play();
          }
        }
      }

      // Normal click toggles done
      li.addEventListener('click', () => {
        toggleDone(i);
        soundDone.play();
      });

      // Right side buttons: Edit & Delete
      const btnDiv = document.createElement("div");
      btnDiv.className = "flex gap-2 ml-2";

      const editBtn = document.createElement("button");
      editBtn.textContent = "Edit";
      editBtn.className = "text-sm text-blue-500 hover:underline";
      editBtn.onclick = (e) => {
        e.stopPropagation();
        editTask(i);
      };

      const deleteBtn = document.createElement("button");
      deleteBtn.textContent = "Delete";
      deleteBtn.className = "text-sm text-red-500 hover:underline";
      deleteBtn.onclick = (e) => {
        e.stopPropagation();
        deleteTask(i);
        soundDelete.play();
      };

      btnDiv.appendChild(editBtn);
      btnDiv.appendChild(deleteBtn);

      li.appendChild(btnDiv);

      taskList.appendChild(li);
    });
  }

  function addTask() {
    const text = taskInput.value.trim();
    if (!text) return;

    const time = prompt("â° Optional: Set reminder time (HH:MM)?", "");
    tasks.push({ text, done: false, time });
    saveTasks();
    renderTasks();
    taskInput.value = '';
    soundAdd.play();
  }

  function toggleDone(index) {
    tasks[index].done = !tasks[index].done;
    saveTasks();
    renderTasks();
  }

  function deleteTask(index) {
    tasks.splice(index, 1);
    saveTasks();
    renderTasks();
  }

  function editTask(index) {
    const newText = prompt("Edit your task:", tasks[index].text);
    if (newText !== null && newText.trim()) {
      tasks[index].text = newText.trim();
      saveTasks();
      renderTasks();
    }
  }

  addBtn.addEventListener("click", addTask);
  taskInput.addEventListener("keydown", (e) => {
    if (e.key === "Enter") addTask();
  });

  // Reminder checker every minute
  setInterval(() => {
    const now = new Date();
    const currentTime = now.toTimeString().slice(0, 5); // HH:MM format

    tasks.forEach((task, i) => {
      if (!task.done && task.time === currentTime) {
        reminderSound.play();
        alert(`ğŸ”” Reminder: ${task.text}`);
        tasks[i].time = ""; // prevent repeat
        saveTasks();
        renderTasks();
      }
    });
  }, 60000);

  // Initialize
  setQuoteOfDay();
  renderTasks();

</script>
</body>
</html>
